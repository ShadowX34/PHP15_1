<?php
$json = '[
    {"город": "Москва", "температура": 15, "состояние": "облачно"},
    {"город": "Сочи", "температура": 25, "состояние": "солнечно"},
    {"город": "Питер", "температура": 18, "состояние": "дождь"},
    {"город": "Калуга", "температура": 22, "состояние": "ясно"}
]';

// Декодируем JSON в массив
$weatherData = json_decode($json, true);

// Проверяем наличие ошибок декодирования
if (json_last_error() !== JSON_ERROR_NONE) {
    die('Ошибка декодирования JSON: ' . json_last_error_msg());
}

// Фильтруем города с температурой выше 20 градусов
$citiesAboveTwenty = array_filter($weatherData, function($city) {
    return $city['температура'] > 20;
});

// Выводим результат
if (!empty($citiesAboveTwenty)) {
    foreach ($citiesAboveTwenty as $city) {
        echo "Город: {$city['город']}, Температура: {$city['температура']}°C, Состояние: {$city['состояние']}\n";
    }
} else {
    echo "Нет городов с температурой выше 20 градусов.\n";
}
?>